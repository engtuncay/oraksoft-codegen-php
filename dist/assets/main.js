(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function e(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(s){if(s.ep)return;s.ep=!0;const o=e(s);fetch(s.href,o)}})();const l={Backspace:"Backspace",Clear:"Clear",Down:"ArrowDown",End:"End",Enter:"Enter",Escape:"Escape",Home:"Home",Space:" ",Up:"ArrowUp"},n={Close:0,CloseSelect:1,First:2,Last:3,Next:4,Open:5,Previous:6,Space:8,Type:9};function c(r=[],t,e=[]){return r.filter(i=>i.toLowerCase().indexOf(t.toLowerCase())===0&&e.indexOf(i)<0)}function u(r,t){const{key:e,altKey:i,ctrlKey:s,metaKey:o}=r;if(!t&&(e===l.Down||e===l.Enter||e===l.Space))return n.Open;if(e===l.Down)return n.Next;if(e===l.Up)return n.Previous;if(e===l.Home)return n.First;if(e===l.End)return n.Last;if(e===l.Escape)return n.Close;if(e===l.Enter)return n.CloseSelect;if(e===l.Space)return n.Space;if(e===l.Backspace||e===l.Clear||e.length===1&&!i&&!s&&!o)return n.Type}function v(r,t){const e=c(r,t)[0],i=s=>s.every(o=>o===s[0]);if(console.log("testing string",t),e)return r.indexOf(e);if(i(t.split(""))){const s=c(r,t[0]),o=(t.length-1)%s.length;return r.indexOf(s[o])}else return-1}function h(r,t,e){switch(e){case n.First:return 0;case n.Last:return t;case n.Previous:return Math.max(0,r-1);case n.Next:return Math.min(t,r+1);default:return r}}function p(r){return r&&r.clientHeight<r.scrollHeight}function d(r,t){const{offsetHeight:e,offsetTop:i}=r,{offsetHeight:s,scrollTop:o}=t,a=i<o,m=i+e>o+s;a?t.scrollTo(0,i):m&&t.scrollTo(0,i-s+e)}class b{constructor(t,e){this.elDiv=t,this.elInput=t.querySelector("input"),this.elListBoxDiv=t.querySelector("[role=listbox]"),this.idBase=this.elInput.id,this.options=e,this.activeIndex=0,this.open=!1}init(){this.getOptionsInit().length>0&&(this.elInput.value=this.options[0]),this.elInput.addEventListener("input",this.onInput.bind(this)),this.elInput.addEventListener("blur",this.onInputBlur.bind(this)),this.elInput.addEventListener("click",()=>this.updateMenuState(!0)),this.elInput.addEventListener("keydown",this.onInputKeyDown.bind(this)),this.options.map((t,e)=>{const i=document.createElement("div");i.setAttribute("role","option"),i.id=`${this.idBase}-${e}`,i.className=e===0?"combo-option option-current":"combo-option",i.setAttribute("aria-selected",`${e===0}`),i.innerText=t,i.addEventListener("click",()=>{this.onOptionClick(e)}),i.addEventListener("mousedown",this.onOptionMouseDown.bind(this)),this.elListBoxDiv.appendChild(i)})}onInput(){const t=this.elInput.value,e=c(this.options,t),i=e.filter(o=>o===this.options[this.activeIndex]);e.length>0&&!i.length&&this.onOptionChange(this.options.indexOf(e[0]));const s=this.options.length>0;this.open!==s&&this.updateMenuState(s,!1)}onInputKeyDown(t){const e=this.options.length-1,i=u(t,this.open);switch(i){case n.Next:case n.Last:case n.First:case n.Previous:return t.preventDefault(),this.onOptionChange(h(this.activeIndex,e,i));case n.CloseSelect:return t.preventDefault(),this.selectOption(this.activeIndex),this.updateMenuState(!1);case n.Close:return t.preventDefault(),this.updateMenuState(!1);case n.Open:return this.updateMenuState(!0)}}onInputBlur(){if(this.ignoreBlur){this.ignoreBlur=!1;return}this.open&&(this.selectOption(this.activeIndex),this.updateMenuState(!1,!1))}onOptionChange(t){this.activeIndex=t,this.elInput.setAttribute("aria-activedescendant",`${this.idBase}-${t}`);const e=this.elDiv.querySelectorAll("[role=option]");[...e].forEach(i=>{i.classList.remove("option-current")}),e[t].classList.add("option-current"),this.open&&p(this.elListBoxDiv)&&d(e[t],this.elListBoxDiv)}onOptionClick(t){this.onOptionChange(t),this.selectOption(t),this.updateMenuState(!1)}onOptionMouseDown(){this.ignoreBlur=!0}selectOption(t){const e=this.options[t];this.elInput.value=e,this.activeIndex=t;const i=this.elDiv.querySelectorAll("[role=option]");[...i].forEach(s=>{s.setAttribute("aria-selected","false")}),i[t].setAttribute("aria-selected","true")}updateMenuState(t,e=!0){this.open=t,this.elInput.setAttribute("aria-expanded",`${t}`),t?this.elDiv.classList.add("open"):this.elDiv.classList.remove("open"),e&&this.elInput.focus()}getOptionsInit(){return this.options==null&&(this.options=[]),this.options}}class E{constructor(t,e){this.elDiv=t,this.elInput=t.querySelector("input"),this.elListboxDiv=t.querySelector("[role=listbox]"),this.idBase=this.elInput.id,this.options=e,this.activeIndex=0,this.open=!1}init(){this.getOptionsInit().length>0&&(this.elInput.value=this.options[0]),this.elInput.addEventListener("input",this.onInput.bind(this)),this.elInput.addEventListener("blur",this.onInputBlur.bind(this)),this.elInput.addEventListener("click",()=>this.updateMenuState(!0)),this.elInput.addEventListener("keydown",this.onInputKeyDown.bind(this)),this.options.map((t,e)=>{const i=document.createElement("div");i.setAttribute("role","option"),i.id=`${this.idBase}-${e}`,i.className=e===0?"combo-option option-current":"combo-option",i.setAttribute("aria-selected",`${e===0}`),i.innerText=t,i.addEventListener("click",()=>{this.onOptionClick(e)}),i.addEventListener("mousedown",this.onOptionMouseDown.bind(this)),this.elListboxDiv.appendChild(i)})}onInput(){const t=this.elInput.value,e=c(this.options,t),i=e.filter(o=>o===this.options[this.activeIndex]);e.length>0&&!i.length&&this.onOptionChange(this.options.indexOf(e[0]));const s=this.options.length>0;this.open!==s&&this.updateMenuState(s,!1)}onInputKeyDown(t){const e=this.options.length-1,i=u(t,this.open);switch(i){case n.Next:case n.Last:case n.First:case n.Previous:return t.preventDefault(),this.onOptionChange(h(this.activeIndex,e,i));case n.CloseSelect:return t.preventDefault(),this.selectOption(this.activeIndex),this.updateMenuState(!1);case n.Close:return t.preventDefault(),this.updateMenuState(!1);case n.Open:return this.updateMenuState(!0)}}onInputBlur(){if(this.ignoreBlur){this.ignoreBlur=!1;return}this.open&&(this.selectOption(this.activeIndex),this.updateMenuState(!1,!1))}onOptionChange(t){this.activeIndex=t,this.elInput.setAttribute("aria-activedescendant",`${this.idBase}-${t}`);const e=this.elDiv.querySelectorAll("[role=option]");[...e].forEach(i=>{i.classList.remove("option-current")}),e[t].classList.add("option-current"),this.open&&p(this.elListboxDiv)&&d(e[t],this.elListboxDiv)}onOptionClick(t){this.onOptionChange(t),this.selectOption(t),this.updateMenuState(!1)}onOptionMouseDown(){this.ignoreBlur=!0}selectOption(t){const e=this.options[t];this.elInput.value=e,this.activeIndex=t;const i=this.elDiv.querySelectorAll("[role=option]");[...i].forEach(s=>{s.setAttribute("aria-selected","false")}),i[t].setAttribute("aria-selected","true")}updateMenuState(t,e=!0){this.open=t,this.elInput.setAttribute("aria-expanded",`${t}`),t?this.elDiv.classList.add("open"):this.elDiv.classList.remove("open"),e&&this.elInput.focus()}getOptionsInit(){return this.options==null&&(this.options=[]),this.options}}class g{constructor(t,e){this.el=t,this.inputEl=t.querySelector("input"),this.listboxEl=t.querySelector("[role=listbox]"),this.idBase=this.inputEl.id,this.selectedEl=document.getElementById(`${this.idBase}-selected`),this.options=e,this.activeIndex=0,this.open=!1}init(){this.inputEl.addEventListener("input",this.onInput.bind(this)),this.inputEl.addEventListener("blur",this.onInputBlur.bind(this)),this.inputEl.addEventListener("click",()=>this.updateMenuState(!0)),this.inputEl.addEventListener("keydown",this.onInputKeyDown.bind(this)),this.listboxEl.addEventListener("blur",this.onInputBlur.bind(this)),this.options.map((t,e)=>{const i=document.createElement("div");i.setAttribute("role","option"),i.id=`${this.idBase}-${e}`,i.className=e===0?"combo-option option-current":"combo-option",i.setAttribute("aria-selected","false"),i.innerText=t,i.addEventListener("click",()=>{this.onOptionClick(e)}),i.addEventListener("mousedown",this.onOptionMouseDown.bind(this)),this.listboxEl.appendChild(i)})}onInput(){const t=this.inputEl.value,e=c(this.options,t),i=e.filter(o=>o===this.options[this.activeIndex]);e.length>0&&!i.length&&this.onOptionChange(this.options.indexOf(e[0]));const s=this.options.length>0;this.open!==s&&this.updateMenuState(s,!1)}onInputKeyDown(t){const e=this.options.length-1,i=u(t,this.open);switch(i){case n.Next:case n.Last:case n.First:case n.Previous:return t.preventDefault(),this.onOptionChange(h(this.activeIndex,e,i));case n.CloseSelect:return t.preventDefault(),this.updateOption(this.activeIndex);case n.Close:return t.preventDefault(),this.updateMenuState(!1);case n.Open:return this.updateMenuState(!0)}}onInputBlur(){if(this.ignoreBlur){this.ignoreBlur=!1;return}this.open&&this.updateMenuState(!1,!1)}onOptionChange(t){this.activeIndex=t,this.inputEl.setAttribute("aria-activedescendant",`${this.idBase}-${t}`);const e=this.el.querySelectorAll("[role=option]");[...e].forEach(i=>{i.classList.remove("option-current")}),e[t].classList.add("option-current"),this.open&&p(this.listboxEl)&&d(e[t],this.listboxEl)}onOptionClick(t){this.onOptionChange(t),this.updateOption(t),this.inputEl.focus()}onOptionMouseDown(){this.ignoreBlur=!0}removeOption(t){this.options[t];const e=this.el.querySelectorAll("[role=option]");e[t].setAttribute("aria-selected","false"),e[t].classList.remove("option-selected");const i=document.getElementById(`${this.idBase}-remove-${t}`);this.selectedEl.removeChild(i.parentElement)}selectOption(t){const e=this.options[t];this.activeIndex=t;const i=this.el.querySelectorAll("[role=option]");i[t].setAttribute("aria-selected","true"),i[t].classList.add("option-selected");const s=document.createElement("button"),o=document.createElement("li");s.className="remove-option",s.type="button",s.id=`${this.idBase}-remove-${t}`,s.setAttribute("aria-describedby",`${this.idBase}-remove`),s.addEventListener("click",()=>{this.removeOption(t)}),s.innerHTML=e+" ",o.appendChild(s),this.selectedEl.appendChild(o)}updateOption(t){this.options[t],this.el.querySelectorAll("[role=option]")[t].getAttribute("aria-selected")==="true"?this.removeOption(t):this.selectOption(t),this.inputEl.value=""}updateMenuState(t,e=!0){this.open=t,this.inputEl.setAttribute("aria-expanded",`${t}`),t?this.el.classList.add("open"):this.el.classList.remove("open"),e&&this.inputEl.focus()}}class S{constructor(t,e){this.el=t,this.comboEl=t.querySelector("[role=combobox]"),this.valueEl=this.comboEl.querySelector("span"),this.listboxEl=t.querySelector("[role=listbox]"),this.idBase=this.comboEl.id,this.options=e,this.activeIndex=0,this.open=!1,this.searchString="",this.searchTimeout=null}init(){this.valueEl.innerHTML=this.options[0],this.comboEl.addEventListener("blur",this.onComboBlur.bind(this)),this.comboEl.addEventListener("click",()=>this.updateMenuState(!0)),this.comboEl.addEventListener("keydown",this.onComboKeyDown.bind(this)),this.options.map((t,e)=>{const i=document.createElement("div");i.setAttribute("role","option"),i.id=`${this.idBase}-${e}`,i.className=e===0?"combo-option option-current":"combo-option",i.setAttribute("aria-selected",`${e===0}`),i.innerText=t,i.addEventListener("click",s=>{s.stopPropagation(),this.onOptionClick(e)}),i.addEventListener("mousedown",this.onOptionMouseDown.bind(this)),this.listboxEl.appendChild(i)})}getSearchString(t){return typeof this.searchTimeout=="number"&&window.clearTimeout(this.searchTimeout),this.searchTimeout=window.setTimeout(()=>{this.searchString=""},1e3),this.searchString+=t,this.searchString}onComboKeyDown(t){const{key:e}=t,i=this.options.length-1,s=u(t,this.open);switch(s){case n.Next:case n.Last:case n.First:case n.Previous:return t.preventDefault(),this.onOptionChange(h(this.activeIndex,i,s));case n.CloseSelect:case n.Space:t.preventDefault(),this.selectOption(this.activeIndex);case n.Close:return t.preventDefault(),this.updateMenuState(!1);case n.Type:this.updateMenuState(!0);var o=this.getSearchString(e);return this.onOptionChange(Math.max(0,v(this.options,o)));case n.Open:return t.preventDefault(),this.updateMenuState(!0)}}onComboBlur(){if(this.ignoreBlur){this.ignoreBlur=!1;return}this.open&&(this.selectOption(this.activeIndex),this.updateMenuState(!1,!1))}onOptionChange(t){this.activeIndex=t,this.comboEl.setAttribute("aria-activedescendant",`${this.idBase}-${t}`);const e=this.el.querySelectorAll("[role=option]");[...e].forEach(i=>{i.classList.remove("option-current")}),e[t].classList.add("option-current"),p(this.listboxEl)&&d(e[t],this.listboxEl)}onOptionClick(t){this.onOptionChange(t),this.selectOption(t),this.updateMenuState(!1)}onOptionMouseDown(){this.ignoreBlur=!0}selectOption(t){const e=this.options[t];this.valueEl.innerHTML=e,this.activeIndex=t;const i=this.el.querySelectorAll("[role=option]");[...i].forEach(s=>{s.setAttribute("aria-selected","false")}),i[t].setAttribute("aria-selected","true")}updateMenuState(t,e=!0){this.open=t,this.comboEl.setAttribute("aria-expanded",`${t}`),t?this.el.classList.add("open"):this.el.classList.remove("open"),e&&this.comboEl.focus();const i=t?`${this.idBase}-${this.activeIndex}`:this.valueEl.id;this.comboEl.setAttribute("aria-activedescendant",i)}}const f=["Apple","Banana","Blueberry","Boysenberry","Cherry","Durian","Eggplant","Fig","Grape","Guava","Huckleberry"],I=document.querySelector(".js-combobox"),O=new b(I,f);O.init();const L=document.querySelector(".js-select"),y=new S(L,f);y.init();const C=document.querySelector(".js-multiselect"),B=new g(C,f);B.init();const D=document.querySelector(".js-combobox2"),w=new E(D,f);w.init();
